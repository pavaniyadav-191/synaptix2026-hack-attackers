<!DOCTYPE html>
<html>
<head>
    <title>AI Health Monitoring Dashboard</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <style>
        body {
            font-family: Arial, sans-serif;
            background: linear-gradient(to right, #141e30, #243b55);
            color: white;
            text-align: center;
            padding: 20px;
        }

        .container {
            background: #1f1f1f;
            padding: 20px;
            border-radius: 15px;
            width: 400px;
            margin: auto;
            box-shadow: 0px 5px 20px rgba(0,0,0,0.5);
        }

        input {
            width: 90%;
            padding: 8px;
            margin: 8px;
            border-radius: 6px;
            border: none;
        }

        button {
            padding: 10px 20px;
            background: #00c6ff;
            border: none;
            color: white;
            border-radius: 6px;
            cursor: pointer;
        }

        .status {
            font-size: 18px;
            margin-top: 10px;
        }

        .safe { color: #00ff99; }
        .alert { color: #ff4d4d; }

        .meter {
            width: 100%;
            background: #333;
            border-radius: 20px;
            overflow: hidden;
            margin-top: 15px;
        }

        .meter-fill {
            height: 20px;
            width: 0%;
            background: green;
            transition: 0.5s;
        }

        canvas {
            margin-top: 20px;
            background: white;
            border-radius: 10px;
        }
    </style>
</head>

<body>

<h1>AI Wearable Health Monitoring</h1>

<div class="container">

    <input type="number" id="hr" placeholder="Heart Rate (bpm)">
    <input type="number" step="0.1" id="spo2" placeholder="SpO2 (%)">
    <input type="number" step="0.1" id="temp" placeholder="Temperature (Â°C)">
    <br>
    <button onclick="computeRisk()">Analyze</button>

    <div class="status" id="status"></div>

    <!-- Risk Meter -->
    <div class="meter">
        <div class="meter-fill" id="meterFill"></div>
    </div>

    <!-- Risk Chart -->
    <canvas id="riskChart"></canvas>

</div>

<script>
    let baseline = 0.2;
    let riskData = [];
    let labels = [];

    // Sound Alert
    const alertSound = new Audio("https://www.soundjay.com/button/beep-07.wav");

    const ctx = document.getElementById('riskChart').getContext('2d');
    const riskChart = new Chart(ctx, {
        type: 'line',
        data: {
            labels: labels,
            datasets: [{
                label: 'Risk Level',
                data: riskData,
                borderColor: 'red',
                fill: false,
                tension: 0.3
            }]
        },
        options: {
            scales: {
                y: { beginAtZero: true }
            }
        }
    });

    function computeRisk() {
        let hr = parseFloat(document.getElementById("hr").value);
        let spo2 = parseFloat(document.getElementById("spo2").value);
        let temp = parseFloat(document.getElementById("temp").value);

        let risk = 0.0;
        risk += (hr - 70) * 0.02;
        risk += (97 - spo2) * 0.5;
        risk += (temp - 36.8) * 0.7;

        let status = document.getElementById("status");
        let meterFill = document.getElementById("meterFill");

        let riskPercent = Math.min(Math.max(risk * 20, 0), 100); // scale to %

        meterFill.style.width = riskPercent + "%";

        if (risk > baseline + 0.15) {
            status.innerHTML = "âš  ALERT! Risk Level: " + risk.toFixed(2);
            status.className = "status alert";
            meterFill.style.background = "red";
            alertSound.play();   // ðŸ”” SOUND ALERT
        } else {
            status.innerHTML = "âœ… Safe. Risk Level: " + risk.toFixed(2);
            status.className = "status safe";
            meterFill.style.background = "green";
        }

        baseline = 0.98 * baseline + 0.02 * risk;

        // Update graph
        riskData.push(risk.toFixed(2));
        labels.push("R" + riskData.length);
        riskChart.update();
    }
</script>

</body>
</html>